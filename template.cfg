NEW_HOSTNAME="pc-mike"

CREATE_DIRS=(
  "$HOME/projects"
  "$HOME/scripts"
  "$HOME/src"
  "$HOME/tmp"
)

REMOVE_DIRS=(
)

CREATE_SYMBOLIC_LINKS() {
  printf "Nothing to do..."
}

CUSTOM_STEPS() {
  # Dotfiles (stow)
  cd "$HOME/scripts"
  git clone git@github.com:margrevm/dotfiles.git || log_warn "Clone failed (already exists or access issue)."

  log_step "Stowing dotfiles with --adopt..."
  stow -d "$HOME/scripts/dotfiles" -t "$HOME" . --adopt

  log_step "Resetting dotfiles repo to clean state..."
  cd "$HOME/scripts/dotfiles"
  git reset --hard
}

CUSTOM_INSTALL() {
  # Tailscale setup
  if ! command -v tailscale >/dev/null 2>&1; then
    log_warn "Tailscale not installed; skipping"
  else
    if systemctl is-active --quiet tailscaled; then
      log_step "tailscaled already running"
    else
      log_step "Enable and start tailscaled..."
      sudo systemctl enable --now tailscaled || log_warn "Failed to enable/start tailscaled"
    fi

    if tailscale status >/dev/null 2>&1; then
      log_step "Tailscale already authenticated; skipping login"
    else
      log_step "Authenticate Tailscale (opens browser for login)"
      sudo tailscale up || log_warn "tailscale up failed (authentication may be required)"
    fi
  fi
}

DNF_INSTALL_PACKAGES=(
  tree
  fastfetch
  htop
  gnome-tweaks
  gnome-shell-extension-gsconnect
  python3
  python3-pip
  git
  curl
  wget
  unzip
  less
  vim
  colordiff
  stow
  net-tools
  nmap
  wl-clipboard # Wayland clipboard utilities equivalent to xclip/xsel
  java-latest-openjdk
  java-latest-openjdk-devel
  libreoffice
  drawing
  pdfarranger
  xournalpp
  heif-pixbuf-loader
  chromium
  code
  lutris
  gnome-terminal    # Lutris prerequisite
  vulkan-tools      # Lutris prerequisite
  steam
  bat
  tailscale
  trayscale
  snapper
  lpf-mscore-fonts  # Microsoft core fonts
  kernel-devel      # NVIDIA driver prerequisite
  kernel-headers    # NVIDIA driver prerequisite
  gcc
  make
  akmods            # NVIDIA driver prerequisite
  dkms              # NVIDIA driver prerequisite
  akmod-nvidia      # NVIDIA driver
  xorg-x11-drv-nvidia-cuda  # NVIDIA driver prerequisite
  nvidia-settings           # NVIDIA driver prerequisite
  libva-nvidia-driver       # NVIDIA driver prerequisite
  libgda          # Copyous clipboard prerequisite
  libgda-sqlite   # Copyous clipboard prerequisite
)

DNF_REMOVE_PACKAGES=(
  gnome-tour
)

FLATPAK_INSTALL_PACKAGES=(
  com.bitwarden.desktop
  com.stremio.Stremio
  com.spotify.Client
  org.ferdium.Ferdium
  com.discordapp.Discord
  net.cozic.joplin_desktop
  com.mattjakeman.ExtensionManager
  com.synology.SynologyDrive
)

GNOME_EXTENSIONS=(
  gsconnect@andyholmes.github.io
)

GNOME_GSETTINGS=(
  # General GNOME settings
  "org.gnome.desktop.sound|event-sounds|false|Alert sounds: off"
  "org.gnome.desktop.interface|enable-hot-corners|false|Hot corner: off"
  "org.gnome.desktop.notifications|show-in-lock-screen|false|Lock screen notifications: off"
  "org.gnome.desktop.session|idle-delay|900|Power saving idle delay: 15 minutes"
  "org.gnome.desktop.screensaver|lock-delay|300|Screen lock delay: 5 minutes"
  "org.gnome.desktop.interface|power-profile|performance|Power profile: performance"
  "org.gnome.system.locale|region|fr_BE.UTF-8|Formats: Belgium"
  # Files (Nautilus) settings
  "org.gnome.nautilus.preferences|sort-directories-first|true|Sort folders before files"
  "org.gnome.nautilus.preferences|recursive-search|always|Search all locations"
  "org.gnome.nautilus.preferences|show-image-thumbnails|always|Enable thumbnails for all folders"
  # Text Editor settings
  "org.gnome.TextEditor|show-line-numbers|true|Display line numbers: on"
  "org.gnome.TextEditor|highlight-current-line|true|Highlight current line: on"
  "org.gnome.TextEditor|show-overview-map|true|Display overview map: on"
  "org.gnome.TextEditor|indent-style|'space'|Indentation: spaces"
  "org.gnome.TextEditor|tab-width|4|Spaces per tab: 4"
  "org.gnome.TextEditor|indent-width|4|Spaces per indent: 4"
)

GIT_CLONE_REPOS=(
  "git@github.com:margrevm/fedora-post-install.git|$HOME/scripts/fedora-post-install"
  "git@github.com:margrevm/fedora-update.git|$HOME/scripts/fedora-update"
  "git@github.com:margrevm/housekeep.git|$HOME/scripts/housekeep"
)

